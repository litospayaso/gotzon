{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/angel/Documents/gotzon/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ThemePopoverComponent } from '@components/theme-popover/theme-popover.component';\nimport { ResolveEnd } from '@angular/router';\nimport { filter } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@services/request.service\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@services/user.service\";\nimport * as i5 from \"@angular/common\";\nfunction HomePage_div_2_div_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 11);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 12)(3, \"g\", 13);\n    i0.ɵɵelement(4, \"path\", 14)(5, \"path\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"g\", 16);\n    i0.ɵɵelement(7, \"path\", 14)(8, \"circle\", 17)(9, \"path\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"g\", 19);\n    i0.ɵɵelement(11, \"path\", 14)(12, \"circle\", 20)(13, \"path\", 21);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(14, \"div\", 22);\n    i0.ɵɵelement(15, \"img\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 24);\n    i0.ɵɵelement(17, \"img\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 26);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const theme_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", theme_r5.complete);\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngClass\", theme_r5.complete);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", \"https://raw.githubusercontent.com/litospayaso/gotzon/master/src/img/icons/\" + theme_r5.img, i0.ɵɵsanitizeUrl)(\"alt\", theme_r5.img);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", theme_r5.complete);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", theme_r5.title, \" \");\n  }\n}\nfunction HomePage_div_2_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵlistener(\"click\", function HomePage_div_2_div_2_Template_div_click_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const theme_r5 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.openTheme(theme_r5, $event));\n    });\n    i0.ɵɵtemplate(1, HomePage_div_2_div_2_div_1_Template, 20, 6, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const theme_r5 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", theme_r5.lesson || theme_r5.vocabulary || theme_r5.exercises || ctx_r4.isAdmin);\n  }\n}\nfunction HomePage_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7);\n    i0.ɵɵtemplate(2, HomePage_div_2_div_2_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const row_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"id\", i_r3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", row_r2);\n  }\n}\nconst _c0 = function () {\n  return [\"/admin\"];\n};\nfunction HomePage_ion_fab_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-fab\", 27)(1, \"ion-fab-button\", 28);\n    i0.ɵɵelement(2, \"ion-icon\", 29);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\nconst _c1 = function () {\n  return [\"/vocabulary\"];\n};\nexport let HomePage = /*#__PURE__*/(() => {\n  class HomePage {\n    constructor(router, requestService, loadingController, popoverController, userService) {\n      this.router = router;\n      this.requestService = requestService;\n      this.loadingController = loadingController;\n      this.popoverController = popoverController;\n      this.userService = userService;\n      this.themes = [];\n      this.isAdmin = false;\n      this.isAdmin = window.location.href.includes('localhost');\n      this.router.events.pipe(filter(event => event instanceof ResolveEnd)).subscribe(event => {\n        const root = event;\n        if (root.url === '/home') {\n          this.calculateComplete();\n        }\n      });\n    }\n    ngAfterViewInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const loader = yield _this.loadingController.create({\n          message: 'Cargando...'\n        });\n        loader.present();\n        _this.requestService.getLessons().subscribe(themes => {\n          _this.themes = themes;\n          _this.calculateComplete();\n          loader.dismiss();\n        });\n      })();\n    }\n    calculateComplete() {\n      const userData = this.userService.getUserData();\n      this.themes.forEach(theme => {\n        theme.forEach(e => {\n          const userThemeData = userData[Number(e.id)];\n          if (userThemeData === undefined) {\n            e.complete = 'zero';\n          } else {\n            e.complete = 'zero';\n            let toComplete = 0;\n            toComplete += e.exercises ? 1 : 0;\n            toComplete += e.lesson ? 1 : 0;\n            toComplete += e.vocabulary ? 1 : 0;\n            let completed = 0;\n            completed += userThemeData.exercises ? 1 : 0;\n            completed += userThemeData.lesson ? 1 : 0;\n            completed += userThemeData.vocabulary ? 1 : 0;\n            const percent = completed / toComplete * 100;\n            if (percent > 30 && percent < 50) {\n              e.complete = 'third';\n            }\n            if (percent > 49 && percent < 65) {\n              e.complete = 'half';\n            }\n            if (percent > 64 && percent < 99) {\n              e.complete = 'two-third';\n            }\n            if (percent === 100) {\n              e.complete = 'completed';\n            }\n          }\n        });\n      });\n    }\n    openTheme(theme, ev) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        const popover = yield _this2.popoverController.create({\n          component: ThemePopoverComponent,\n          animated: true,\n          cssClass: 'popover-class',\n          event: ev,\n          componentProps: {\n            theme\n          },\n          showBackdrop: false\n        });\n        yield popover.present();\n        const {\n          data\n        } = yield popover.onDidDismiss();\n        if (data?.route) {\n          _this2.router.navigate([data.route], {\n            skipLocationChange: true\n          });\n        }\n      })();\n    }\n    static #_ = this.ɵfac = function HomePage_Factory(t) {\n      return new (t || HomePage)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.RequestService), i0.ɵɵdirectiveInject(i3.LoadingController), i0.ɵɵdirectiveInject(i3.PopoverController), i0.ɵɵdirectiveInject(i4.UserService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: HomePage,\n      selectors: [[\"app-home\"]],\n      decls: 7,\n      vars: 5,\n      consts: [[3, \"fullscreen\"], [1, \"themes-container\"], [\"class\", \"theme\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"training-button\", \"vertical\", \"bottom\", \"horizontal\", \"start\", \"slot\", \"fixed\", \"skipLocationChange\", \"\", \"routerDirection\", \"root\", 3, \"routerLink\", 4, \"ngIf\"], [\"vertical\", \"bottom\", \"horizontal\", \"end\", \"slot\", \"fixed\", \"skipLocationChange\", \"\", \"routerDirection\", \"root\", 1, \"training-button\", 3, \"routerLink\"], [\"name\", \"barbell-outline\"], [1, \"theme\"], [1, \"row-theme\", 3, \"id\"], [\"class\", \"theme-element\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"theme-element\", 3, \"click\"], [4, \"ngIf\"], [1, \"progress-container\", 3, \"ngClass\"], [\"viewBox\", \"0 0 100 100\", \"width\", \"110\", \"height\", \"110\", 1, \"progress-element\"], [\"transform\", \"translate(50, 50)\", 1, \"one\"], [\"d\", \"M3.061616997868383e-15,-50A50,50,0,1,1,-3.061616997868383e-15,50A50,50,0,1,1,3.061616997868383e-15,-50M-7.715274834628325e-15,-42A42,42,0,1,0,7.715274834628325e-15,42A42,42,0,1,0,-7.715274834628325e-15,-42Z\", \"fill\", \"#e5e5e5\"], [\"d\", \"M3.552713678800501e-15,-45.8257569495584A4,4,0,0,1,4.347826086956525,-49.81060537995478A50,50,0,0,1,45.31116268040093,21.139974847436356A4,4,0,0,1,39.68626966596885,22.912878474779202L39.68626966596885,22.912878474779205A4,4,0,0,1,38.061376651536776,17.75757887184654A42,42,0,0,0,3.6521739130434776,-41.840908519162014A4,4,0,0,1,3.552713678800501e-15,-45.8257569495584Z\", \"fill\", \"var(--ion-color-primary-tint)\"], [\"transform\", \"translate(50, 50)\", 1, \"two\"], [\"cx\", \"3.9949609477190924\", \"cy\", \"45.82619651494328\", \"fill\", \"white\", \"r\", \"6.666666666666666\"], [\"d\", \"M3.552713678800501e-15,-45.8257569495584A4,4,0,0,1,4.347826086956525,-49.81060537995478A50,50,0,0,1,4.347826086956521,49.81060537995478A4,4,0,0,1,3.552713678800501e-15,45.8257569495584L3.552713678800501e-15,45.8257569495584A4,4,0,0,1,3.6521739130434816,41.840908519162014A42,42,0,0,0,3.6521739130434776,-41.840908519162014A4,4,0,0,1,3.552713678800501e-15,-45.8257569495584Z\", \"fill\", \"var(--ion-color-primary-tint)\"], [\"transform\", \"translate(50, 50)\", 1, \"three\"], [\"cx\", \"-37.689169866899235\", \"cy\", \"26.37283592532314\", \"fill\", \"white\", \"r\", \"6.666666666666666\"], [\"d\", \"M3.552713678800501e-15,-45.8257569495584A4,4,0,0,1,4.347826086956525,-49.81060537995478A50,50,0,1,1,-40.963336593444396,28.670630532518448A4,4,0,0,1,-39.68626966596885,22.91287847477921L-39.68626966596885,22.91287847477921A4,4,0,0,1,-34.4092027384933,24.083329647315487A42,42,0,1,0,3.6521739130434776,-41.840908519162014A4,4,0,0,1,3.552713678800501e-15,-45.8257569495584Z\", \"fill\", \"var(--ion-color-primary-tint)\"], [1, \"theme-icon\", 3, \"ngClass\"], [3, \"src\", \"alt\"], [1, \"completed-container\", 3, \"ngClass\"], [\"src\", \"https://raw.githubusercontent.com/litospayaso/gotzon/master/src/img/icons/favourite.png\", \"alt\", \"\"], [1, \"theme-title\"], [\"vertical\", \"bottom\", \"horizontal\", \"start\", \"slot\", \"fixed\", \"skipLocationChange\", \"\", \"routerDirection\", \"root\", 1, \"training-button\", 3, \"routerLink\"], [\"color\", \"secondary\"], [\"name\", \"cog-outline\"]],\n      template: function HomePage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"ion-content\", 0)(1, \"div\", 1);\n          i0.ɵɵtemplate(2, HomePage_div_2_Template, 3, 2, \"div\", 2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(3, HomePage_ion_fab_3_Template, 3, 2, \"ion-fab\", 3);\n          i0.ɵɵelementStart(4, \"ion-fab\", 4)(5, \"ion-fab-button\");\n          i0.ɵɵelement(6, \"ion-icon\", 5);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"fullscreen\", true);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngForOf\", ctx.themes);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isAdmin);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(4, _c1));\n        }\n      },\n      dependencies: [i5.NgClass, i5.NgForOf, i5.NgIf, i1.RouterLink, i3.IonContent, i3.IonFab, i3.IonFabButton, i3.IonIcon, i3.RouterLinkDelegate],\n      styles: [\".themes-container[_ngcontent-%COMP%]{margin-top:65px;display:flex;flex-direction:column;align-items:center}.themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]{margin:20px}.themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .row-theme[_ngcontent-%COMP%]{display:flex;flex-direction:row}.themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]{cursor:pointer;margin:0 25px}.themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]{background-color:transparent;height:0}.themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .progress-container.zero[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .progress-container.completed[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:none}.themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .progress-container.third[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:rotate(150deg)}.themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .progress-container.third[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   g.two[_ngcontent-%COMP%], .themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .progress-container.third[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   g.three[_ngcontent-%COMP%]{display:none}.themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .progress-container.half[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:rotate(150deg)}.themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .progress-container.half[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   g.one[_ngcontent-%COMP%], .themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .progress-container.half[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   g.three[_ngcontent-%COMP%]{display:none}.themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .progress-container.two-third[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:rotate(150deg)}.themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .progress-container.two-third[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   g.one[_ngcontent-%COMP%], .themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .progress-container.two-third[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   g.two[_ngcontent-%COMP%]{display:none}.themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .theme-icon[_ngcontent-%COMP%]{border:solid 8px #e5e5e5;border-radius:50%;height:110px;width:110px;display:flex;align-items:center;justify-content:center}.themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .theme-icon.completed[_ngcontent-%COMP%]{border-color:var(--ion-color-success-tint)}.themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .completed-container[_ngcontent-%COMP%]{display:none;height:0px;width:24px;position:relative;top:-22px;left:70px}.themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .completed-container.completed[_ngcontent-%COMP%]{display:block}.themes-container[_ngcontent-%COMP%]   .theme[_ngcontent-%COMP%]   .theme-element[_ngcontent-%COMP%]   .theme-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;text-align:center;max-width:110px;margin-top:12px}.training-button[_ngcontent-%COMP%]{margin-bottom:15px;margin-right:15px}\"]\n    });\n  }\n  return HomePage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
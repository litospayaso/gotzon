{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/angel/Documents/gotzon/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FeedbackModalComponent } from '@app/components/feedback-modal/feedback-modal.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@services/request.service\";\nimport * as i4 from \"@services/sound.service\";\nimport * as i5 from \"@services/correction.service\";\nimport * as i6 from \"@services/user.service\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/forms\";\nfunction ExercisesPage_div_1_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.current.title, \" \");\n  }\n}\nfunction ExercisesPage_div_1_ion_card_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-card-content\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.current.question, \" \");\n  }\n}\nfunction ExercisesPage_div_1_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 13)(2, \"ion-button\", 14);\n    i0.ɵɵlistener(\"click\", function ExercisesPage_div_1_div_5_Template_ion_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.playMedia());\n    });\n    i0.ɵɵelement(3, \"ion-icon\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"h2\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"audio\", 16);\n    i0.ɵɵelement(7, \"source\", 17);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r4.current.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r4.audio, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction ExercisesPage_div_1_ion_item_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-textarea\", 18);\n    i0.ɵɵlistener(\"ngModelChange\", function ExercisesPage_div_1_ion_item_6_Template_ion_textarea_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.response = $event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r5.response);\n  }\n}\nfunction ExercisesPage_div_1_ion_list_7_ion_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"ion-radio\", 20);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r16 = ctx.$implicit;\n    const i_r17 = ctx.index;\n    i0.ɵɵattribute(\"data-index\", i_r17);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(option_r16);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", option_r16);\n  }\n}\nfunction ExercisesPage_div_1_ion_list_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-list\")(1, \"ion-radio-group\", 18);\n    i0.ɵɵlistener(\"ngModelChange\", function ExercisesPage_div_1_ion_list_7_Template_ion_radio_group_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r18.response = $event);\n    });\n    i0.ɵɵtemplate(2, ExercisesPage_div_1_ion_list_7_ion_item_2_Template, 4, 3, \"ion-item\", 19);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r6.response);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.current.options);\n  }\n}\nfunction ExercisesPage_div_1_div_8_ion_row_2_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵlistener(\"click\", function ExercisesPage_div_1_div_8_ion_row_2_div_2_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const i_r22 = i0.ɵɵnextContext().index;\n      const ctx_r24 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r24.selectLinkItem(i_r22));\n    })(\"dragstart\", function ExercisesPage_div_1_div_8_ion_row_2_div_2_Template_div_dragstart_0_listener($event) {\n      i0.ɵɵrestoreView(_r26);\n      const i_r22 = i0.ɵɵnextContext().index;\n      const ctx_r27 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r27.drag($event, i_r22, true));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r22 = i0.ɵɵnextContext().index;\n    const ctx_r23 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassProp(\"selected\", i_r22 === ctx_r23.selectedLinkedItem);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r23.current.items[0][i_r22], \" \");\n  }\n}\nfunction ExercisesPage_div_1_div_8_ion_row_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-row\", 23)(1, \"ion-col\");\n    i0.ɵɵtemplate(2, ExercisesPage_div_1_div_8_ion_row_2_div_2_Template, 2, 3, \"div\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"ion-col\");\n    i0.ɵɵelementStart(4, \"ion-col\", 25)(5, \"div\", 26);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"ion-col\", 27)(8, \"div\", 28);\n    i0.ɵɵlistener(\"click\", function ExercisesPage_div_1_div_8_ion_row_2_Template_div_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r31);\n      const i_r22 = restoredCtx.index;\n      const ctx_r30 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r30.clickOnDropContainer(i_r22));\n    })(\"drop\", function ExercisesPage_div_1_div_8_ion_row_2_Template_div_drop_8_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r31);\n      const i_r22 = restoredCtx.index;\n      const ctx_r32 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r32.dropLinkedItem($event, i_r22));\n    })(\"dragover\", function ExercisesPage_div_1_div_8_ion_row_2_Template_div_dragover_8_listener($event) {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r33 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r33.allowDrop($event));\n    })(\"dragstart\", function ExercisesPage_div_1_div_8_ion_row_2_Template_div_dragstart_8_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r31);\n      const i_r22 = restoredCtx.index;\n      const ctx_r34 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r34.drag($event, i_r22, false));\n    });\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r21 = ctx.$implicit;\n    const i_r22 = ctx.index;\n    const ctx_r20 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r20.current.items[0][i_r22]);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", item_r21, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"selected\", i_r22 === ctx_r20.selectedLinkedItemDropped);\n    i0.ɵɵproperty(\"draggable\", ctx_r20.linkResponse[i_r22] ? true : false);\n    i0.ɵɵattribute(\"itemTo\", ctx_r20.linkResponse[i_r22] ? i_r22 : undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r20.linkResponse[i_r22], \" \");\n  }\n}\nfunction ExercisesPage_div_1_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"ion-grid\");\n    i0.ɵɵtemplate(2, ExercisesPage_div_1_div_8_ion_row_2_Template, 10, 7, \"ion-row\", 22);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.current.items[1]);\n  }\n}\nfunction ExercisesPage_div_1_ion_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 30);\n    i0.ɵɵlistener(\"click\", function ExercisesPage_div_1_ion_button_13_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r35 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r35.checkResponse());\n    });\n    i0.ɵɵtext(1, \"Zuzendu\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ExercisesPage_div_1_ion_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r38 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 31);\n    i0.ɵɵlistener(\"click\", function ExercisesPage_div_1_ion_button_14_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r37 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r37.openModal());\n    });\n    i0.ɵɵtext(1, \"Reportar un error\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ExercisesPage_div_1_ion_button_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r40 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 30);\n    i0.ɵɵlistener(\"click\", function ExercisesPage_div_1_ion_button_15_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r40);\n      const ctx_r39 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r39.continue());\n    });\n    i0.ɵɵtext(1, \"Jarraitu\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"correcting\": a0\n  };\n};\nfunction ExercisesPage_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3);\n    i0.ɵɵelement(2, \"span\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ExercisesPage_div_1_div_3_Template, 2, 1, \"div\", 4);\n    i0.ɵɵtemplate(4, ExercisesPage_div_1_ion_card_4_Template, 3, 1, \"ion-card\", 5);\n    i0.ɵɵtemplate(5, ExercisesPage_div_1_div_5_Template, 8, 2, \"div\", 5);\n    i0.ɵɵtemplate(6, ExercisesPage_div_1_ion_item_6_Template, 2, 1, \"ion-item\", 5);\n    i0.ɵɵtemplate(7, ExercisesPage_div_1_ion_list_7_Template, 3, 2, \"ion-list\", 5);\n    i0.ɵɵtemplate(8, ExercisesPage_div_1_div_8_Template, 3, 1, \"div\", 6);\n    i0.ɵɵelementStart(9, \"div\", 7)(10, \"div\", 8);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 9);\n    i0.ɵɵtemplate(13, ExercisesPage_div_1_ion_button_13_Template, 2, 0, \"ion-button\", 10);\n    i0.ɵɵtemplate(14, ExercisesPage_div_1_ion_button_14_Template, 2, 0, \"ion-button\", 11);\n    i0.ɵɵtemplate(15, ExercisesPage_div_1_ion_button_15_Template, 2, 0, \"ion-button\", 10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"width\", ctx_r0.completePercent);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.current && ctx_r0.current.type !== \"audio\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.current && ctx_r0.current.type !== \"audio\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.current && ctx_r0.current.type === \"audio\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.current && ctx_r0.current.type !== \"option\" && ctx_r0.current.type !== \"link\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.current && ctx_r0.current.type === \"option\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.current && ctx_r0.current.type === \"link\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(14, _c0, ctx_r0.isCorrecting));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", ctx_r0.evaluationClass);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.isCorrecting, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isCorrecting);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isCorrecting && ctx_r0.evaluationClass === \"error\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isCorrecting);\n  }\n}\nconst _c1 = function () {\n  return [\"/home\"];\n};\nfunction ExercisesPage_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 32);\n    i0.ɵɵelement(2, \"img\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 34);\n    i0.ɵɵtext(4, \"\\u00A1Has completado correctamente la lecci\\u00F3n!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 9)(6, \"ion-button\", 35);\n    i0.ɵɵtext(7, \"Volver (Etorri) \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c1));\n  }\n}\nexport let ExercisesPage = /*#__PURE__*/(() => {\n  class ExercisesPage {\n    constructor(activatedRoute, router, loadingController, modalController, requestService, soundService, correction, userService) {\n      this.activatedRoute = activatedRoute;\n      this.router = router;\n      this.loadingController = loadingController;\n      this.modalController = modalController;\n      this.requestService = requestService;\n      this.soundService = soundService;\n      this.correction = correction;\n      this.userService = userService;\n      this.completePercent = '0%';\n      this.audio = '';\n      this.congratulations = false;\n      this.linkResponse = [];\n    }\n    ngAfterViewInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const loader = yield _this.loadingController.create({\n          message: 'Cargando...'\n        });\n        loader.present();\n        _this.activatedRoute.params.subscribe(params => {\n          let {\n            id\n          } = params;\n          id = id.split('?')[0];\n          _this.lessonId = id;\n          _this.requestService.getExercises(_this.lessonId).subscribe(data => {\n            _this.exercises = data;\n            _this.totalExercises = _this.exercises.length;\n            loader.dismiss();\n            _this.setCurrent();\n          }, err => {\n            loader.dismiss();\n            _this.router.navigate(['/home'], {\n              skipLocationChange: true\n            });\n          });\n        });\n      })();\n    }\n    setCurrent() {\n      if (this.exercises.length === 0) {\n        this.lessonComplete();\n      }\n      this.current = this.exercises.sort(() => Math.random() - 0.5).pop();\n      this.response = '';\n      this.isCorrecting = '';\n      if (this.current.type === 'audio') {\n        this.audio = `https://raw.githubusercontent.com/litospayaso/gotzon/master/src/resources/audio/${this.current.question}.mp3`;\n        const audioTag = document.getElementById('audioTag');\n        if (audioTag) {\n          audioTag.load();\n        }\n      }\n      if (this.current.type === 'option') {\n        this.current.options = this.current.options.sort(() => Math.random() - 0.5);\n        document.querySelector('ion-content').focus();\n      }\n      if (this.current.type === 'link') {\n        this.current.items[0] = this.current.items[0].sort(() => Math.random() - 0.5);\n        this.current.items[1] = this.current.items[1].sort(() => Math.random() - 0.5);\n        this.linkResponse = [];\n        this.savedLinkedItems = this.current.items[0];\n      }\n    }\n    checkResponse() {\n      let correct = false;\n      if (this.current.type === 'link') {\n        const objectResponse = this.current.items[1].map((e, index) => [this.linkResponse[index], e]).sort((a, b) => {\n          if (a[0] < b[0]) {\n            return -1;\n          }\n          if (a[0] > b[0]) {\n            return 1;\n          }\n          return 0;\n        });\n        this.response = JSON.stringify(objectResponse);\n        this.current.answer.forEach(e => correct = correct || this.correction.compareArrays(JSON.parse(this.response), JSON.parse(e)));\n      } else {\n        this.current.answer.forEach(e => correct = correct || this.correction.compareStrings(this.response ? this.response : '', e));\n      }\n      if (correct) {\n        this.isCorrecting = ['Oso ondo! ', 'Zuzen! ', 'Egoki! '].sort(() => Math.random() - 0.5).pop();\n        this.soundService.emitSound('success');\n        this.evaluationClass = 'correct';\n        this.completePercent = (this.totalExercises - this.exercises.length) * 100 / this.totalExercises + '%';\n      } else {\n        this.isCorrecting = `Akats: ${this.current.type !== 'link' ? this.current.answer[0] : ''}`;\n        this.soundService.emitSound('fail');\n        this.evaluationClass = 'error';\n      }\n    }\n    continue() {\n      if (this.evaluationClass === 'error') {\n        if (this.current.type === 'link') {\n          this.current.items[0] = this.savedLinkedItems;\n        }\n        this.exercises.push(this.current);\n        this.isCorrecting = null;\n        this.response = '';\n        this.savedLinkedItems = undefined;\n        this.setCurrent();\n      } else {\n        if (this.exercises.length > 0) {\n          this.isCorrecting = null;\n          this.response = '';\n          this.setCurrent();\n        } else {\n          this.lessonComplete();\n        }\n      }\n    }\n    onKeyPress(event) {\n      console.log('%c event', 'background: #df03fc; color: #f8fc03', event);\n      if (event.keyCode === 13) {\n        event.preventDefault();\n        if (this.isCorrecting) {\n          this.continue();\n        } else {\n          this.checkResponse();\n        }\n      }\n      if (event.keyCode > 48 && event.keyCode < 57) {\n        const numberInput = Number(event.key);\n        if (!this.isCorrecting && this.current.type === 'option' && numberInput <= this.current.options.length) {\n          this.response = this.current.options[numberInput - 1];\n        }\n      }\n    }\n    lessonComplete() {\n      this.congratulations = true;\n      this.completePercent = '100%';\n      this.soundService.emitSound('complete');\n      this.userService.setExercisesCompleted(Number(this.lessonId));\n    }\n    playMedia() {\n      const audioTag = document.getElementById('audioTag');\n      audioTag.load();\n    }\n    selectLinkItem(index) {\n      this.selectedLinkedItemDropped = undefined;\n      if (this.selectedLinkedItem === index) {\n        this.selectedLinkedItem = undefined;\n      } else {\n        this.selectedLinkedItem = index;\n      }\n    }\n    clickOnDropContainer(index) {\n      if (typeof this.selectedLinkedItemDropped === 'number' && index !== this.selectedLinkedItemDropped) {\n        const previousResponseOnSlot = this.linkResponse[index];\n        const responseToDrop = this.linkResponse[this.selectedLinkedItemDropped];\n        if (previousResponseOnSlot) {\n          this.current.items[0].push(previousResponseOnSlot);\n        }\n        this.linkResponse[this.selectedLinkedItemDropped] = undefined;\n        this.linkResponse[index] = responseToDrop;\n        this.selectedLinkedItemDropped = undefined;\n      } else {\n        if (typeof this.selectedLinkedItem === 'number') {\n          const previousResponseOnSlot = this.linkResponse[index];\n          const responseToDrop = this.current.items[0][this.selectedLinkedItem];\n          this.linkResponse[index] = responseToDrop;\n          this.current.items[0] = this.current.items[0].filter(e => e !== responseToDrop);\n          if (previousResponseOnSlot) {\n            this.current.items[0].push(previousResponseOnSlot);\n          }\n          this.selectedLinkedItem = undefined;\n        } else {\n          if (this.selectedLinkedItemDropped === index) {\n            this.selectedLinkedItemDropped = undefined;\n          }\n          if (this.selectedLinkedItemDropped === undefined && this.linkResponse[index]) {\n            this.selectedLinkedItemDropped = index;\n          }\n        }\n      }\n    }\n    dropLinkedItem(event, index) {\n      event.preventDefault();\n      const itemFrom = event.dataTransfer.getData('itemFrom');\n      const itemTo = event.dataTransfer.getData('itemTo');\n      if (itemFrom) {\n        this.selectedLinkedItem = Number(itemFrom);\n        this.clickOnDropContainer(index);\n      }\n      if (itemTo && this.linkResponse[Number(itemTo)]) {\n        this.selectedLinkedItemDropped = Number(itemTo);\n        this.clickOnDropContainer(index);\n      }\n    }\n    allowDrop(event) {\n      event.preventDefault();\n    }\n    drag(event, i, isItemFrom) {\n      event.dataTransfer.setData(isItemFrom ? 'itemFrom' : 'itemTo', String(i));\n    }\n    openModal() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        const modal = yield _this2.modalController.create({\n          component: FeedbackModalComponent,\n          componentProps: {\n            leccion: _this2.lessonId,\n            id: _this2.current.id,\n            respuesta: _this2.response\n          }\n        });\n        yield modal.present();\n      })();\n    }\n    static #_ = this.ɵfac = function ExercisesPage_Factory(t) {\n      return new (t || ExercisesPage)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.LoadingController), i0.ɵɵdirectiveInject(i2.ModalController), i0.ɵɵdirectiveInject(i3.RequestService), i0.ɵɵdirectiveInject(i4.SoundService), i0.ɵɵdirectiveInject(i5.CorrectionService), i0.ɵɵdirectiveInject(i6.UserService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ExercisesPage,\n      selectors: [[\"app-exercises\"]],\n      decls: 3,\n      vars: 3,\n      consts: [[\"tabindex\", \"-1\", 3, \"fullscreen\", \"keyup\"], [\"class\", \"page-container\", 4, \"ngIf\"], [1, \"page-container\"], [1, \"percent-complete\"], [\"class\", \"question-title\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"link-container\", 4, \"ngIf\"], [1, \"correcting-container\", 3, \"ngClass\"], [1, \"evaluation\", 3, \"ngClass\"], [1, \"buttons-container\"], [\"expand\", \"block\", 3, \"click\", 4, \"ngIf\"], [\"expand\", \"block\", \"color\", \"warning\", 3, \"click\", 4, \"ngIf\"], [1, \"question-title\"], [1, \"audio-container\"], [1, \"play-button\", 3, \"click\"], [\"name\", \"play-outline\"], [\"controls\", \"controls\", \"id\", \"audioTag\", \"preload\", \"none\", \"autoplay\", \"\"], [\"type\", \"audio/mpeg\", 3, \"src\"], [3, \"ngModel\", \"ngModelChange\"], [4, \"ngFor\", \"ngForOf\"], [\"slot\", \"start\", 3, \"value\"], [1, \"link-container\"], [\"class\", \"row-item-container\", 4, \"ngFor\", \"ngForOf\"], [1, \"row-item-container\"], [\"class\", \"link-item-from-card\", \"draggable\", \"true\", 3, \"selected\", \"click\", \"dragstart\", 4, \"ngIf\"], [1, \"link-item-to-container-left\"], [1, \"link-item-to\"], [1, \"link-item-to-container-right\"], [1, \"link-item-drop-container\", 3, \"draggable\", \"click\", \"drop\", \"dragover\", \"dragstart\"], [\"draggable\", \"true\", 1, \"link-item-from-card\", 3, \"click\", \"dragstart\"], [\"expand\", \"block\", 3, \"click\"], [\"expand\", \"block\", \"color\", \"warning\", 3, \"click\"], [1, \"zorionak-picture\"], [\"src\", \"img/icons/congratulations.png\"], [1, \"correct\"], [\"expand\", \"block\", \"routerDirection\", \"root\", \"skipLocationChange\", \"\", 3, \"routerLink\"]],\n      template: function ExercisesPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"ion-content\", 0);\n          i0.ɵɵlistener(\"keyup\", function ExercisesPage_Template_ion_content_keyup_0_listener($event) {\n            return ctx.onKeyPress($event);\n          });\n          i0.ɵɵtemplate(1, ExercisesPage_div_1_Template, 16, 16, \"div\", 1);\n          i0.ɵɵtemplate(2, ExercisesPage_div_2_Template, 8, 2, \"div\", 1);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"fullscreen\", true);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.congratulations);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.congratulations);\n        }\n      },\n      dependencies: [i7.NgClass, i7.NgForOf, i7.NgIf, i8.NgControlStatus, i8.NgModel, i1.RouterLink, i2.IonButton, i2.IonCard, i2.IonCardContent, i2.IonCol, i2.IonContent, i2.IonGrid, i2.IonIcon, i2.IonItem, i2.IonLabel, i2.IonList, i2.IonRadio, i2.IonRadioGroup, i2.IonRow, i2.IonTextarea, i2.SelectValueAccessor, i2.TextValueAccessor, i2.RouterLinkDelegate],\n      styles: [\".page-container[_ngcontent-%COMP%]{padding:78px 2% 0!important;display:flex;flex-direction:column;height:98%}.page-container[_ngcontent-%COMP%]   .percent-complete[_ngcontent-%COMP%]{position:relative;width:100%;background-color:#fff;height:10px;top:-18px;left:0;margin:0 -2%;border-radius:5px}.page-container[_ngcontent-%COMP%]   .percent-complete[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;background:repeating-linear-gradient(45deg,var(--ion-color-success),var(--ion-color-success) 10px,var(--ion-color-success-shade) 10px,var(--ion-color-success-shade) 20px);height:100%;border-radius:5px;box-shadow:13px 3px 61px -8px #00000078;transition:width 1s ease-in-out}.page-container[_ngcontent-%COMP%]   .correcting-container[_ngcontent-%COMP%]{position:relative;left:-100vw;transition:all .5s cubic-bezier(.68,-.55,.27,1.55)}.page-container[_ngcontent-%COMP%]   .correcting-container.correcting[_ngcontent-%COMP%]{left:0}.page-container[_ngcontent-%COMP%]   .correcting-container[_ngcontent-%COMP%]   .evaluation[_ngcontent-%COMP%]{padding:15px;width:-moz-fit-content;width:fit-content;border-radius:5px;min-height:55px;margin:8px 8px 8px 110px}.page-container[_ngcontent-%COMP%]   .correcting-container[_ngcontent-%COMP%]   .evaluation.error[_ngcontent-%COMP%]{background-color:var(--ion-color-danger);min-width:94px}.page-container[_ngcontent-%COMP%]   .correcting-container[_ngcontent-%COMP%]   .evaluation.correct[_ngcontent-%COMP%]{background-color:var(--ion-color-success);min-width:94px}.page-container[_ngcontent-%COMP%]   .correcting-container[_ngcontent-%COMP%]   .evaluation[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;top:58px;left:145px;width:0;border-left:0px solid transparent;border-right:18px solid transparent}.page-container[_ngcontent-%COMP%]   .correcting-container[_ngcontent-%COMP%]   .evaluation.error[_ngcontent-%COMP%]:before{border-top:22px solid var(--ion-color-danger)}.page-container[_ngcontent-%COMP%]   .correcting-container[_ngcontent-%COMP%]   .evaluation.correct[_ngcontent-%COMP%]:before{border-top:22px solid var(--ion-color-success)}.page-container[_ngcontent-%COMP%]   .correcting-container[_ngcontent-%COMP%]:after{position:relative;right:0;background-image:url(https://raw.githubusercontent.com/litospayaso/gotzon/master/src/img/assets/B2.svg);background-size:225px 275px;display:inline-block;width:225px;height:275px;content:\\\"\\\"}.page-container[_ngcontent-%COMP%]   .audio-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.page-container[_ngcontent-%COMP%]   .audio-container[_ngcontent-%COMP%]   .play-button[_ngcontent-%COMP%]{min-width:unset;display:flex;align-items:center;justify-content:center;color:#4c4c4c;margin-right:16px}.page-container[_ngcontent-%COMP%]   .audio-container[_ngcontent-%COMP%]   .play-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0}.page-container[_ngcontent-%COMP%]   audio[_ngcontent-%COMP%]{visibility:hidden;height:0px}.page-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]   .row-item-container[_ngcontent-%COMP%]{padding:20px 0}.page-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]   .row-item-container[_ngcontent-%COMP%]   .link-item-from-card[_ngcontent-%COMP%]{border:solid #e5e5e5;border-width:2px 2px 4px;border-radius:16px;font-size:15px;text-align:center;margin:10px 20px;padding:10px 0;cursor:pointer}.page-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]   .row-item-container[_ngcontent-%COMP%]   .link-item-from-card.selected[_ngcontent-%COMP%]{border:solid var(--ion-color-primary-tint)}.page-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]   .row-item-container[_ngcontent-%COMP%]   .link-item-to-container-left[_ngcontent-%COMP%]{border:solid #e5e5e5;border-width:2px 0 2px 2px;border-radius:16px 0 0 16px}.page-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]   .row-item-container[_ngcontent-%COMP%]   .link-item-to-container-left[_ngcontent-%COMP%]   .link-item-to[_ngcontent-%COMP%]{text-align:right;padding-top:20px}.page-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]   .row-item-container[_ngcontent-%COMP%]   .link-item-to-container-right[_ngcontent-%COMP%]{border:solid #e5e5e5;border-width:2px 2px 2px 0;border-radius:0 16px 16px 0}.page-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]   .row-item-container[_ngcontent-%COMP%]   .link-item-to-container-right[_ngcontent-%COMP%]   .link-item-drop-container[_ngcontent-%COMP%]{border:solid #e5e5e5;border-width:2px 2px 4px;border-radius:16px;font-size:15px;text-align:center;margin:10px 20px;padding:10px 0;cursor:pointer;min-height:50px}.page-container[_ngcontent-%COMP%]   .link-container[_ngcontent-%COMP%]   .row-item-container[_ngcontent-%COMP%]   .link-item-to-container-right[_ngcontent-%COMP%]   .link-item-drop-container.selected[_ngcontent-%COMP%]{border:solid var(--ion-color-primary-tint)}.page-container[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]{margin-top:auto}.page-container[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:16px 0}.page-container[_ngcontent-%COMP%]   .zorionak-picture[_ngcontent-%COMP%]{text-align:center}\"]\n    });\n  }\n  return ExercisesPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}